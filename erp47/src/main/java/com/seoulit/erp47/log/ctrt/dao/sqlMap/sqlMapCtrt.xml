<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.seoulit.erp47.log.ctrt.dao.CtrtDAO">
<!-- mapper의 namespace는  Interface인  실제 DAO의 경로로 설정한다. -->
<cache flushInterval="86400000" eviction="LRU" />

    <select id="findCtrtList" flushCache="false" resultType="CtrtBean">
        SELECT * FROM LP_CTRT
        <trim prefix="WHERE" prefixOverrides="AND">
            <if test="buyReceiptNo != null">
                AND BUY_RECEIPT_NO = #{buyReceiptNo}
            </if>
            <if test="ctrtStartCal != null and ctrtEndCal != null and buyReceiptNo == null">
                AND CTRT_DATE BETWEEN #{ctrtStartCal} AND #{ctrtEndCal} AND INPT_YB = 'Y'
            </if>
            <if test="ctrtStartCal == null and ctrtEndCal == null and buyReceiptNo == null">
                AND INPT_YB = 'Y'
            </if>
        </trim>
        ORDER BY
            CTRT_NO
    </select>



</mapper>