<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.seoulit.erp47.hrs.emp.dao.EmpDAO">

	<resultMap type="empBean" id="resultEmp">

		<result property="frignSingleTxrate" column="FRIGN_SINGLE_TXRATE" />
		<result property="empNo" column="EMP_NO" />
		<result property="empNm" column="EMP_NM" />
		<result property="jobtt" column="JOBTT" />
		<result property="jobcl" column="JOBCL" />
		<result property="jobrk" column="JOBRK" />
		<result property="rrn" column="RRN" />
		<result property="birthday" column="BIRTHDAY" />
		<result property="gender" column="GENDER" />
		<result property="mateYn" column="MATE_YN" />
		<result property="addr" column="ADDR" />
		<result property="zipCd" column="ZIP_CD" />
		<result property="permaddr" column="PERMADDR" />
		<result property="tel" column="TEL" />
		<result property="phone" column="PHONE" />
		<result property="extsn" column="EXTSN" />
		<result property="fax" column="FAX" />
		<result property="password" column="PASSWORD" />
		<result property="image" column="IMAGE" />
		<result property="natnt" column="NATNT" />
		<result property="localYn" column="LOCAL_YN" />
		<result property="forinNum" column="FORIN_NUM" />
		<result property="deptNm" column="DEPT_NM" />
		<result property="deptCd" column="DEPT_CD" />
		<result property="hireDiv" column="HIRE_DIV" />
		<result property="workStatus" column="WORK_STATUS" />
		<result property="workPeriod" column="WORK_PERIOD" />
		<result property="retDate" column="RET_DATE" />
		<result property="retMonthWorkingdays" column="RET_MONTH_WORKINGDAYS" />
		<result property="payStep" column="PAY_STEP" />
		<result property="hireDate" column="HIRE_DATE" />
		<result property="pms" column="PMS" />
		<result property="detailAddr" column="DETAIL_ADDR" />
		<result property="email" column="EMAIL" />
		<result property="bankNm" column="BANK_NM" />
		<result property="accountNm" column="ACCOUNT_NM" />
		<result property="payDate" column="PAY_DATE" />

		<collection property="careerList"
			select="com.seoulit.erp47.hrs.emp.dao.CareerDAO.findCareerList"
			column="EMP_NO" javaType="list" />

		<collection property="disabilityList"
			select="com.seoulit.erp47.hrs.emp.dao.DisabilityDAO.findDisabilityList"
			column="EMP_NO" javaType="list" />

		<collection property="educationBeanList"
			select="com.seoulit.erp47.hrs.emp.dao.EducationDAO.findEducationList"
			column="EMP_NO" javaType="list" />

		<collection property="familyList"
			select="com.seoulit.erp47.hrs.emp.dao.FamilyDAO.findFamilyList"
			column="EMP_NO" javaType="list" />

		<collection property="licenseList"
			select="com.seoulit.erp47.hrs.emp.dao.LicenseDAO.findLicenseList"
			column="EMP_NO" javaType="list" />

		<collection property="militaryList"
			select="com.seoulit.erp47.hrs.emp.dao.MilitaryDAO.findMilitaryList"
			column="EMP_NO" javaType="list" />

		<collection property="perconaldateList"
			select="com.seoulit.erp47.hrs.emp.dao.PerconaldateDAO.findPerconaldateList"
			column="EMP_NO" javaType="list" />

	</resultMap>

	<select id="selectEmp" resultMap="resultEmp" parameterType="HashMap">
		select
		<!-- 사원번호 -->
		e.emp_no ,
		<!-- 사원명 -->
		e.emp_nm ,
		<!-- 비밀번호 -->
		e.password ,
		<!-- 권한코드 -->
		e.pms , 
		<!-- 부서명 -->
		e.dept_nm ,
		<!-- 직급 -->
		e.jobrk
		from hm_emp e
		where emp_no = #{empNo}

	</select>

	<select id="findEmpList" resultMap="resultEmp" parameterType="HashMap">
		select
		<!-- 사원번호 -->
		e.emp_no ,
		<!-- 사원명 -->
		e.emp_nm ,
		<!-- 비밀번호 -->
		e.password
		<!-- 사원정보 -->
		from hm_emp e
		<!-- where -->
		<if test="empNo != null">
			AND emp_no = #{empNo}
		</if>
		<if test="empNm != null">
			AND emp_nm = #{empNm}
		</if>
		order by emp_no
	</select>

	<select id="selectEmpList" resultMap="resultEmp" parameterType="HashMap">
		select
		e.emp_no ,
		<!-- 사원번호 -->
		e.frign_single_txrate ,
		<!-- 외국인단일세율 -->
		e.emp_nm ,
		<!-- 사원명 -->
		e.jobtt ,
		<!-- 직책 -->
		e.jobcl ,
		<!-- 직종 -->
		e.jobrk ,
		<!-- 직급 -->
		e.rrn ,
		<!-- 주민번호 -->
		e.pms,
		<!-- 권한코드 -->
		e.birthday ,
		<!-- 생년월일 -->
		e.gender ,
		<!-- 성별 -->
		e.mate_yn ,
		<!-- 배우자유무 -->
		e.addr ,
		<!-- 주소 -->
		e.zip_cd ,
		<!-- 우편번호 -->
		e.permaddr ,
		<!-- 본적 -->
		e.tel ,
		<!-- 전화번호 -->
		e.phone ,
		<!-- 휴대번호 -->
		e.extsn ,
		<!-- 원내번호 -->
		e.fax ,
		<!-- 팩스 -->
		e.password ,
		<!-- 비밀번호 -->
		<!-- 'http://192.168.1.135/img/'||e.image as image , -->
		<!-- 이거쓰면 리포트에 이미지 이름만 적어도 끈다 여기서는 상세조회할때도 여기 사용해서 사진이 이상하게뜨는데 나중에 수정하고 
			ㄷ시 이걸적자 -->
		e.image ,
		<!-- 이거쓰면 리포트에 "http://192.168.1.135/img/"+$F{image}이미지경로와 이름 다 적어야 뜬다 -->
		<!-- 사진파일명 -->
		e.dept_nm,
		<!-- 부서명 -->
		e.natnt ,
		<!-- 국적 -->
		e.local_yn ,
		<!-- 내외국인여부 -->
		e.forin_num ,
		<!-- 외국인등록번호 -->
		e.dept_cd ,
		<!-- 부서코드 -->
		e.hire_div ,
		<!-- 고용구분 -->
		e.work_status ,
		<!-- 재직상태 -->
		e.work_period ,
		<!-- 근속연수 -->
		e.ret_date ,
		<!-- 퇴사일 -->
		e.ret_month_workingdays ,
		<!-- 퇴사예정일 -->
		e.pay_step ,
		<!-- 호봉 -->
		e.hire_date,
		<!-- 고용일 -->
		e.pay_date,
		<!-- 급여일 -->
		e.detail_addr,
		<!-- 상세주소 -->
		e.email,
		<!-- 이메일 -->
		e.bank_nm,
		<!-- 은행명 -->
		e.account_nm,
		<!-- 계좌번호 -->
		e.login_Ip,
		<!-- 접속IP -->
		e.login_Time
		<!-- 접속시간 -->
		from hm_emp e
		<!-- 사원정보, 부서테이블 -->
		where
		1=1
		<if test="empNo != null">
			AND emp_no = #{empNo}
		</if>
		<if test="empNm != null">
			AND emp_nm = #{empNm}
		</if>
		order by emp_no
	</select>

</mapper>
		